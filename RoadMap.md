# Windows Sentinel: 네트워크 보안 기능 확장 기술 로드맵

## 1. 프로젝트 개요

-   **프로젝트명:** Windows Sentinel
-   [cite_start]**전략적 방향:** 제한된 개발 기간과 광범위한 초기 기능 범위의 한계를 해결하기 위해, 프로젝트의 초점을 '네트워크 보안' 기능의 심화 및 고도화에 맞춘다[cite: 4, 6, 9].
-   [cite_start]**핵심 목표:** 기존의 수동적 네트워크 트래픽 모니터링 시스템을, 위협을 자동으로 식별하고 차단하는 능동적 방어 시스템으로 전환한다[cite: 13, 14].

---

## 0. UI 재설계 및 사용자 경험 개선 (Pre-Phase)

### 0.1. 목표 (Objective)
-   기존 NetWorks.xaml의 복잡하고 분산된 UI를 작업 관리자와 유사한 직관적인 인터페이스로 재설계한다.
-   프로세스-네트워크 매핑, 실시간 연결 관리, 즉시 차단 기능을 통합하여 사용자 중심의 보안 모니터링 시스템을 구축한다.

### 0.2. 핵심 기능 및 구성 요소
-   **프로세스-네트워크 매핑 시스템**: 실행 중인 프로그램과 네트워크 연결의 실시간 연동
-   **통합 네트워크 모니터링**: 실시간 연결, 히스토리, 보안 분석을 한 화면에서 관리
-   **즉시 대응 기능**: 의심스러운 연결을 선택하여 즉시 차단
-   **작업 관리자 스타일 UI**: 친숙하고 직관적인 사용자 인터페이스

### 0.3. 개발 과업 (Development Tasks)
1.  **UI 구조 재설계** ✅
    -   [x] 기존 NetWorks.xaml UI 분석 및 문제점 정리
    -   [x] 새로운 UI 레이아웃 설계 (프로세스 정보, 네트워크 연결, 보안 상태, 실시간 차트)
    -   [x] Material Design 기반 컴포넌트 설계
    -   [x] 반응형 레이아웃 및 테마 지원

2.  **프로세스-네트워크 매핑 시스템** 🔄
    -   [x] ProcessNetworkMapper 클래스 구현
    -   [x] netstat -ano 기반 활성 연결 수집
    -   [x] 프로세스 정보와 네트워크 연결 실시간 매핑
    -   [x] 연결 시간, 데이터 전송량 등 상세 정보 수집

3.  **네트워크 연결 관리 기능** ✅
    -   [x] NetworkConnectionManager 클래스 구현
    -   [x] 프로세스별 네트워크 연결 강제 차단
    -   [x] IP 주소 기반 차단 기능
    -   [x] 차단 로그 및 사용자 알림 시스템

4.  **실시간 보안 분석 통합** ✅
    -   [x] RealTimeSecurityAnalyzer 클래스 구현
    -   [x] 연결별 위험도 실시간 평가
    -   [x] 보안 경고 및 권장 조치 제시
    -   [x] 위험도별 색상 코딩 및 시각화

5.  **사용자 인터페이스 구현** ✅
    -   [x] 새로운 NetWorks.xaml 페이지 구현
    -   [x] 프로세스 목록 및 네트워크 연결 테이블
    -   [x] 실시간 차트 및 통계 대시보드
    -   [x] 컨텍스트 메뉴 및 액션 버튼

---

## 2. Phase 1: 블랙리스트 기반 능동 방어 (Reactive Defense)

### 2.1. 목표 (Objective)
-   실시간 위협 인텔리전스(Threat Intelligence)를 활용하여 알려진 악성 IP 주소와의 네트워크 연결을 자동으로 탐지하고 차단하는 반응형 방어 체계를 구현한다.

### 2.2. 핵심 기술 및 구성 요소 (Key Technologies/Components)
-   [cite_start]**외부 위협 DB API:** AbuseIPDB [cite: 26]
-   **패킷 캡처 라이브러리:** SharpPcap (Existing)
-   **방화벽 제어:** Windows Firewall (Netsh, PowerShell, or .NET Wrapper)
-   **비동기 처리:** `async/await` for non-blocking I/O

### 2.3. 개발 과업 (Development Tasks)
1.  **API 클라이언트 모듈 개발** ✅
    -   [x] AbuseIPDB API 엔드포인트에 대한 비동기 HTTP 요청(GET/POST)을 처리하는 C# 클라이언트 클래스를 구현한다.
    -   [x] API 응답(JSON) 역직렬화를 위한 DTO(Data Transfer Object) 모델을 정의한다.
    -   [x] API 키를 소스 코드에 하드코딩하지 않고, 구성 파일 등을 통해 안전하게 관리한다.

2.  **실시간 IP 차단 시스템 구현** ✅
    -   [x] IP 위협 정보 조회 및 자동 차단 로직 구현
    -   [x] API 호출 제한(Rate Limit) 준수 및 중복 조회 방지를 위한 캐싱 정책 구현
    -   [x] 실시간 위협 탐지 및 자동 차단 시스템 구축

3.  **방화벽 컨트롤러 모듈 개발** ✅
    -   [x] 특정 IP 주소에 대한 차단 규칙을 Windows 방화벽에 동적으로 추가/삭제하는 서비스를 구현한다.
    -   [x] 해당 프로세스가 관리자 권한(Administrator privileges)으로 실행될 수 있도록 권한 상승 로직을 처리한다.

4.  **UI/UX 연동** ✅
    -   [x] 차단된 IP, 시간, 사유(평판 점수) 등을 표시하는 로그 뷰(Log View)를 개발한다.
    -   [x] 사용자가 오탐(False Positive)에 대응할 수 있도록 특정 IP를 예외 처리하는 화이트리스트(Whitelist) 기능을 구현한다.
    -   [x] 새로운 UI와 연동하여 실시간 차단 상태 표시

5.  **프로세스-네트워크 매핑과 연동** ✅
    -   [x] 악성 IP 탐지 시 해당 프로세스 자동 식별
    -   [x] 프로세스별 위협 정보 표시
    -   [x] 자동 차단 및 수동 개입 옵션 제공

---

## 3. Phase 2: 휴리스틱 기반 지능형 탐지 (Proactive Detection)

### 3.1. 목표 (Objective)
-   [cite_start]블랙리스트에 존재하지 않는 신종/변종 악성코드나 제로데이 공격의 행위 패턴을 분석하여, 사전에 정의된 규칙(Rule)에 기반해 위협을 탐지하는 능동적 탐지 시스템을 구축한다[cite: 38].

### 3.2. 핵심 기술 및 구성 요소 (Key Technologies/Components)
-   **상태 기반 패킷 검사(Stateful Packet Inspection) 엔진**
-   [cite_start]**패턴 매칭 시스템:** YARA [cite: 45, 46]

### 3.3. 개발 과업 (Development Tasks)
1.  **휴리스틱 규칙 정의 및 설계** ⏳
    -   [ ] 휴리스틱 규칙을 기술하기 위한 스키마(e.g., JSON, XML)를 정의한다.
    -   [ ] 탐지할 비정상 행위 패턴을 구체적으로 명세화한다.
        -   [cite_start]**포트 스캐닝:** 단일 소스 IP가 임계 시간(T) 내에 임계 개수(N) 이상의 포트로 접속을 시도하는 행위[cite: 41].
        -   [cite_start]**데이터 유출:** 비정상 프로세스가 외부 IP로 대용량 데이터를 업로드하는 행위[cite: 43].
        -   [cite_start]**내부망 확산:** 비정상 WMI 접근 시도 등 내부 네트워크를 대상으로 한 이상 활동[cite: 42].

2.  **상태 분석 엔진 개발** ⏳
    -   [ ] 시간의 흐름에 따라 IP 및 프로세스별 네트워크 연결 상태(e.g., 연결 수, 데이터 전송량)를 추적하고 집계하는 모듈을 개발한다. 이 엔진은 휴리스틱 규칙 평가의 기반 데이터를 제공한다.

3.  **YARA 엔진 연동 (R&D)** ⏳
    -   [ ] .NET 환경에서 YARA 라이브러리를 사용하기 위한 래퍼(Wrapper)를 구현하거나 기존 라이브러리를 검토한다.
    -   [ ] 네트워크 패킷 페이로드(Payload)를 YARA 규칙 기반으로 스캔하여 악성코드 통신 시그니처를 탐지하는 기능을 구현한다.

4.  **UI 통합 및 시각화** ⏳
    -   [ ] 휴리스틱 규칙 기반 탐지 결과를 UI에 실시간 표시
    -   [ ] 이상 패턴 시각화 및 경고 시스템
    -   [ ] 규칙 편집 및 커스터마이징 인터페이스

---

## 4. Phase 3: AI/ML 기반 예측 방어 (Predictive Defense)

### 4.1. 목표 (Objective)
-   [cite_start]사용자의 정상적인 네트워크 행위 패턴을 학습하여 베이스라인(Baseline)을 구축하고, 이로부터 벗어나는 이상 징후(Anomaly)를 탐지하여 잠재적 위협을 예측하고 방어하는 자기 학습형 보안 시스템을 구현한다[cite: 57, 64].

### 4.2. 핵심 기술 및 구성 요소 (Key Technologies/Components)
-   **머신러닝 프레임워크:** ML.NET
-   **데이터 수집 및 처리 파이프라인**
-   **이상 탐지 알고리즘**

### 4.3. 개발 과업 (Development Tasks)
1.  **데이터 수집 및 피처 엔지니어링** ⏳
    -   [cite_start]모델 학습에 필요한 주요 네트워크 메트릭(e.g., bytes/sec, packets/sec, protocol distribution)을 지속적으로 수집하고 저장하는 로깅 시스템을 구현한다[cite: 59].
    -   [ ] 수집된 원시 데이터(Raw Data)로부터 모델 학습에 적합한 피처(Feature)를 추출하고 정규화하는 전처리 파이프라인을 설계한다.

2.  **모델 학습 및 베이스라인 생성** ⏳
    -   [cite_start]수집된 데이터를 사용하여 '정상 행위' 베이스라인을 생성하는 이상 탐지 모델의 학습 프로세스를 개발한다[cite: 60].
    -   [ ] 사용자가 특정 기간(e.g., 1주일) 동안의 데이터를 기반으로 베이스라인을 수동으로 생성하거나, 주기적으로 자동 갱신하는 옵션을 제공한다.

3.  **실시간 예측 및 통합** ⏳
    -   [cite_start]학습된 모델을 애플리케이션에 통합하여 실시간 네트워크 트래픽을 입력값으로 예측(Inference)을 수행하는 모듈을 구현한다[cite: 61].
    -   [ ] 모델의 예측 결과가 정상 베이스라인에서 크게 벗어날 경우, 이를 이상 징후로 판단하여 사용자에게 경고하는 시스템을 구축한다.

4.  **AI/ML 결과 시각화** ⏳
    -   [ ] 이상 탐지 결과를 직관적으로 표시하는 대시보드
    -   [ ] 베이스라인 학습 진행률 및 모델 성능 지표
    -   [ ] 예측 결과에 대한 설명 및 권장 조치 제시

---

## 5. 작업 상태 관리

### 5.1. 체크리스트 기호
-   ⏳ **준비 중**: 아직 시작하지 않은 작업
-   🔄 **진행 중**: 현재 작업 중인 항목
-   ✅ **완료**: 작업이 완료된 항목
-   ⚠️ **문제 발생**: 작업 중 문제가 발생한 항목
-   🔍 **검토 필요**: 추가 검토가 필요한 항목

### 5.2. 우선순위
1.  **최우선**: UI 재설계 및 프로세스-네트워크 매핑 시스템
2.  **높음**: Phase 1 (AbuseIPDB API 연동)
3.  **보통**: Phase 2 (휴리스틱 기반 탐지)
4.  **낮음**: Phase 3 (AI/ML 기반 예측)

### 5.3. 예상 일정
-   **UI 재설계**: 2-3주
-   **Phase 1**: 2-3주
-   **Phase 2**: 3-4주
-   **Phase 3**: 4-6주
-   **총 예상 기간**: 11-16주