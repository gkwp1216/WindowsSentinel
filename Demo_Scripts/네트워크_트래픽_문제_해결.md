# ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ í‘œì‹œ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

## ğŸ”§ ë¬¸ì œ í•´ê²° ì™„ë£Œ

### âŒ ì´ì „ ë¬¸ì œ

- **ì¦ìƒ**: Security Dashboardì—ì„œ "ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½"ì´ í•­ìƒ **0.00 MB/s**ë¡œ í‘œì‹œë¨
- **ì›ì¸**:
  1. `GetStatistics()` ë©”ì„œë“œì—ì„œ `TotalTrafficBlocked` ê°’ì„ ì„¤ì •í•˜ì§€ ì•ŠìŒ
  2. íŒ¨í‚· ì²˜ë¦¬ ì‹œ ë°”ì´íŠ¸ ìˆ˜ë¥¼ ì¶”ì í•˜ì§€ ì•ŠìŒ
  3. íŠ¸ë˜í”½ ì†ë„(MB/s) ê³„ì‚° ë¡œì§ ì—†ìŒ

---

## âœ… ì ìš©ëœ í•´ê²°ì±…

### 1. íŠ¸ë˜í”½ ì¶”ì  í•„ë“œ ì¶”ê°€

```csharp
// IntegratedDDoSDefenseSystem.cs
private long _totalBytesProcessed = 0;      // ì²˜ë¦¬ëœ ì´ ë°”ì´íŠ¸ ìˆ˜
private long _totalBytesBlocked = 0;        // ì°¨ë‹¨ëœ ì´ ë°”ì´íŠ¸ ìˆ˜
private DateTime _lastTrafficCalculation = DateTime.Now;
private long _lastSecondBytes = 0;          // ìµœê·¼ 1ì´ˆê°„ ë°”ì´íŠ¸ ìˆ˜
```

### 2. íŒ¨í‚· ì²˜ë¦¬ ì‹œ ë°”ì´íŠ¸ ì¶”ì 

```csharp
public void AddPacket(PacketDto packet)
{
    // ...ê¸°ì¡´ ì½”ë“œ...

    // ë°”ì´íŠ¸ ìˆ˜ ì¶”ì  (íŒ¨í‚· í¬ê¸°: ì‹¤ì œ í¬ê¸° ë˜ëŠ” ê¸°ë³¸ 64ë°”ì´íŠ¸)
    var packetSize = packet.Length > 0 ? packet.Length : 64;
    Interlocked.Add(ref _totalBytesProcessed, packetSize);
    Interlocked.Add(ref _lastSecondBytes, packetSize);
}
```

### 3. ê³µê²© ì°¨ë‹¨ ì‹œ ë°”ì´íŠ¸ ì¶”ì 

```csharp
if (actionResult.Success && IsBlockingAction(action))
{
    Interlocked.Increment(ref _totalAttacksBlocked);

    // ì°¨ë‹¨ëœ íŠ¸ë˜í”½ ë°”ì´íŠ¸ ì¶”ì  (íŒ¨í‚· ìˆ˜ Ã— í‰ê·  512ë°”ì´íŠ¸)
    var estimatedBytes = detectionResult.PacketCount * 512L;
    Interlocked.Add(ref _totalBytesBlocked, estimatedBytes);
}
```

### 4. ì‹¤ì‹œê°„ íŠ¸ë˜í”½ ì†ë„ ê³„ì‚°

```csharp
private double CalculateCurrentTrafficRate()
{
    var now = DateTime.Now;
    var elapsed = (now - _lastTrafficCalculation).TotalSeconds;

    if (elapsed >= 1.0) // 1ì´ˆë§ˆë‹¤ ê³„ì‚°
    {
        var bytesPerSecond = _lastSecondBytes / elapsed;
        var mbPerSecond = bytesPerSecond / (1024.0 * 1024.0);

        // ë””ë²„ê·¸ ë¡œê·¸
        System.Diagnostics.Debug.WriteLine(
            $"ğŸ“¡ íŠ¸ë˜í”½: {_lastSecondBytes} bytes / {elapsed:F1}s = {mbPerSecond:F2} MB/s");

        // ì¹´ìš´í„° ë¦¬ì…‹
        _lastTrafficCalculation = now;
        Interlocked.Exchange(ref _lastSecondBytes, 0);

        return Math.Round(mbPerSecond, 2);
    }

    return 0.0;
}
```

### 5. GetStatistics ì—…ë°ì´íŠ¸

```csharp
public DDoSDetectionStats GetStatistics()
{
    // íŠ¸ë˜í”½ ì†ë„ ê³„ì‚° (MB/s)
    var currentTraffic = CalculateCurrentTrafficRate();

    return new DDoSDetectionStats
    {
        // ...ê¸°ì¡´ í•„ë“œ...
        TotalTrafficBlocked = currentTraffic, // âœ… ì´ì œ ì‹¤ì œ ê°’ ë°˜í™˜!
        LastUpdated = DateTime.Now
    };
}
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### Step 1: Visual Studio ë””ë²„ê·¸ ì¶œë ¥ ì—´ê¸°

- **ë³´ê¸° â†’ ì¶œë ¥ (Ctrl+Alt+O)**

### Step 2: ê³µê²© ì‹œë®¬ë ˆì´í„° ì‹¤í–‰

```powershell
cd C:\My_Project\WS\Demo_Scripts
.\Simple_Attack_Generator.ps1
```

### Step 3: ë””ë²„ê·¸ ë¡œê·¸ í™•ì¸

```
ğŸ“¡ íŠ¸ë˜í”½: 6400 bytes / 1.0s = 0.01 MB/s
ğŸ“¡ íŠ¸ë˜í”½: 12800 bytes / 1.0s = 0.01 MB/s
ğŸ“¡ íŠ¸ë˜í”½: 64000 bytes / 1.0s = 0.06 MB/s
ğŸ“¡ íŠ¸ë˜í”½: 128000 bytes / 1.0s = 0.12 MB/s
```

### Step 4: Security Dashboard í™•ì¸

**ê¸°ëŒ€ ê²°ê³¼:**

- "ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½": **0.01 ~ 0.50 MB/s** (ê³µê²© ê°•ë„ì— ë”°ë¼ ë³€ë™)
- 2ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸
- ê³µê²© ì‹œë®¬ë ˆì´í„° ì‹¤í–‰ ì‹œ ê°’ ì¦ê°€

---

## ğŸ“Š íŠ¸ë˜í”½ ê³„ì‚° ë¡œì§

### ë°ì´í„° íë¦„

```
[íŒ¨í‚· ìˆ˜ì‹ ]
    â†“
AddPacket(packet)
    â†“ packetSize = packet.Length ë˜ëŠ” 64 bytes
    â†“ _lastSecondBytes += packetSize

[1ì´ˆë§ˆë‹¤ ê³„ì‚°]
    â†“
CalculateCurrentTrafficRate()
    â†“ bytesPerSecond = _lastSecondBytes / elapsed
    â†“ mbPerSecond = bytesPerSecond / (1024 Ã— 1024)
    â†“ ì¹´ìš´í„° ë¦¬ì…‹ (_lastSecondBytes = 0)

[SecurityDashboard í‘œì‹œ]
    â†“
GetStatistics() â†’ TotalTrafficBlocked
    â†“
NetworkTrafficMB ì—…ë°ì´íŠ¸ (2ì´ˆë§ˆë‹¤)
    â†“
UI í‘œì‹œ: "X.XX MB/s"
```

### ê³„ì‚° ì˜ˆì‹œ

```
- íŒ¨í‚· í¬ê¸°: 64 bytes
- ì´ˆë‹¹ íŒ¨í‚·: 100 pps (Simple_Attack_Generator.ps1)
- ì´ˆë‹¹ ë°”ì´íŠ¸: 100 Ã— 64 = 6,400 bytes
- MB/s: 6,400 Ã· (1024 Ã— 1024) = 0.006 MB/s
```

---

## ğŸ¯ ì˜ˆìƒ íŠ¸ë˜í”½ ê°’

### Simple_Attack_Generator.ps1

- **íŒ¨í‚· ì†ë„**: 100 pps
- **ì˜ˆìƒ íŠ¸ë˜í”½**: **0.01 ~ 0.02 MB/s**

### UDP_Flood_Generator.ps1

- **íŒ¨í‚· ì†ë„**: 200 pps
- **íŒ¨í‚· í¬ê¸°**: 512 bytes
- **ì˜ˆìƒ íŠ¸ë˜í”½**: **0.10 ~ 0.12 MB/s**

### ì‹¤ì œ DDoS ê³µê²© (ì°¸ê³ )

- **ì†Œê·œëª¨**: 1 ~ 10 MB/s
- **ì¤‘ê·œëª¨**: 10 ~ 100 MB/s
- **ëŒ€ê·œëª¨**: 100+ MB/s

---

## ğŸ” ë¬¸ì œ ì§„ë‹¨

### ë¬¸ì œ 1: ì—¬ì „íˆ 0.00 MB/s í‘œì‹œ

**ê°€ëŠ¥í•œ ì›ì¸:**

1. DDoS ë°©ì–´ ì‹œìŠ¤í…œì´ ì‹œì‘ë˜ì§€ ì•ŠìŒ
2. íŒ¨í‚·ì´ ìˆ˜ì‹ ë˜ì§€ ì•ŠìŒ
3. ê³µê²© ì‹œë®¬ë ˆì´í„°ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•:**

1. Visual Studio ë””ë²„ê·¸ ì¶œë ¥ì—ì„œ "ğŸ“¡ íŠ¸ë˜í”½" ë¡œê·¸ í™•ì¸
2. ë¡œê·¸ê°€ ì—†ìœ¼ë©´ DDoS ì‹œìŠ¤í…œ ì‹œì‘ í™•ì¸
3. ê³µê²© ì‹œë®¬ë ˆì´í„° ì¬ì‹¤í–‰

### ë¬¸ì œ 2: íŠ¸ë˜í”½ ê°’ì´ ë„ˆë¬´ ë‚®ìŒ

**ì›ì¸:** íŒ¨í‚· í¬ê¸°ê°€ ì‘ê±°ë‚˜ ê³µê²© ì†ë„ê°€ ë‚®ìŒ

**í•´ê²°:**

- UDP_Flood_Generator.ps1 ì‚¬ìš© (ë” í° íŒ¨í‚· í¬ê¸°)
- ê³µê²© ìŠ¤í¬ë¦½íŠ¸ì˜ `$packetsPerSecond` ê°’ ì¦ê°€

### ë¬¸ì œ 3: íŠ¸ë˜í”½ ê°’ì´ ë³€ë™ì´ ì‹¬í•¨

**ì›ì¸:** ì •ìƒ ë™ì‘ (ì‹¤ì‹œê°„ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì€ ë³€ë™ë¨)

**íŠ¹ì§•:**

- 1ì´ˆë§ˆë‹¤ ì¬ê³„ì‚°ë˜ì–´ ìì—°ìŠ¤ëŸ½ê²Œ ë³€ë™
- í‰ê· ì ìœ¼ë¡œ ì¼ì •í•œ ê°’ ìœ ì§€

---

## ğŸ“ˆ ì„±ëŠ¥ ì˜í–¥

### ë©”ëª¨ë¦¬

- **ì¶”ê°€ í•„ë“œ**: 3ê°œ (long Ã— 2, DateTime Ã— 1) = ~24 bytes
- **ì˜í–¥**: ë¬´ì‹œí•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€

### CPU

- **ê³„ì‚° ë¹ˆë„**: 1ì´ˆë§ˆë‹¤ (GetStatistics í˜¸ì¶œ ì‹œ)
- **ì—°ì‚°**: ë‚˜ëˆ—ì…ˆ 2íšŒ, ë°˜ì˜¬ë¦¼ 1íšŒ
- **ì˜í–¥**: ë¬´ì‹œí•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€

### ì •í™•ë„

- **ì¸¡ì • ê°„ê²©**: 1ì´ˆ
- **ì˜¤ì°¨**: Â±0.01 MB/s
- **ìš©ë„**: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œì— ì¶©ë¶„

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] íŠ¸ë˜í”½ ì¶”ì  í•„ë“œ ì¶”ê°€ ì™„ë£Œ
- [x] AddPacketì—ì„œ ë°”ì´íŠ¸ ìˆ˜ ì¶”ì 
- [x] ê³µê²© ì°¨ë‹¨ ì‹œ ë°”ì´íŠ¸ ì¶”ì 
- [x] CalculateCurrentTrafficRate êµ¬í˜„
- [x] GetStatisticsì—ì„œ TotalTrafficBlocked ì„¤ì •
- [x] ë””ë²„ê·¸ ë¡œê·¸ ì¶”ê°€
- [x] ë¹Œë“œ ì„±ê³µ (0 errors, 12 warnings)
- [x] í”„ë¡œê·¸ë¨ ì¬ì‹œì‘ ì™„ë£Œ

**í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ!** ğŸš€

---

## ğŸ“ ë°œí‘œ ì‹œì—° íŒ

### ì‹œë‚˜ë¦¬ì˜¤: "ì‹¤ì‹œê°„ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ëª¨ë‹ˆí„°ë§"

1. **Security Dashboard ì—´ê¸°** (íŠ¸ë˜í”½: 0.00 MB/s)
2. **ê³µê²© ì‹œë®¬ë ˆì´í„° ì‹¤í–‰**
   ```powershell
   .\Simple_Attack_Generator.ps1
   ```
3. **2-5ì´ˆ ëŒ€ê¸°**
4. **íŠ¸ë˜í”½ ì¦ê°€ í™•ì¸** (0.00 â†’ 0.01 MB/s)
5. **"í™œì„± ìœ„í˜‘" ë° "ì°¨ë‹¨ëœ ì—°ê²°" ë™ì‹œ ì¦ê°€ í™•ì¸**
6. **ì™„ë£Œ!** ğŸ‰

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 30ì´ˆ ì´ë‚´

---

**ë‚ ì§œ**: 2025-10-19  
**ë°œí‘œê¹Œì§€**: D-3ì¼ (2025-10-22)  
**ìƒíƒœ**: âœ… ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ í‘œì‹œ ë¬¸ì œ í•´ê²° ì™„ë£Œ
