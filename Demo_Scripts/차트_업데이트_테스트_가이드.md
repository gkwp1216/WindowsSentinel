# Security Dashboard 차트 업데이트 테스트 가이드

## 🎯 차트가 업데이트되지 않는 이유

### 📋 체크리스트

1. ✅ **DDoS 방어 시스템 연결 확인**
   - SecurityDashboard가 IntegratedDDoSDefenseSystem에 연결되어야 함
2. ✅ **실제 공격 데이터 필요**
   - DDoS 공격 시뮬레이터를 실행해야 차트에 데이터가 표시됨
3. ✅ **업데이트 간격**
   - 차트는 2초마다 자동 업데이트됨

---

## 🚀 차트 업데이트 테스트 방법

### Step 1: Visual Studio 디버그 출력 확인

**Visual Studio → 보기 → 출력 (View → Output)**에서 다음 로그 확인:

```
✅ 정상 동작 시:
SecurityDashboard 초기화 완료 - DDoS 시스템: 연결됨
🔄 메트릭 업데이트: 총 공격 15개, 차단 10개
📊 차트 업데이트 시작: 총 위협 15개
  - 14시: 5개
  - 15시: 10개
✅ 차트 업데이트 완료: 총 15 위협 탐지

❌ 문제 발생 시:
⚠️ DDoS 시스템 없음 - 기본값 사용
⚠️ DDoS 시스템이 연결되지 않음 - 차트 업데이트 불가
```

---

### Step 2: DDoS 공격 시뮬레이터 실행

#### 방법 1: Simple Attack Generator (추천)

```powershell
cd C:\My_Project\WS\Demo_Scripts
.\Simple_Attack_Generator.ps1
```

**효과:**

- TCP SYN Flood 공격 시뮬레이션 (100 pps)
- 포트: 80, 443, 8080, 3389, 445, 135, 139
- 약 5-10초 후 차트에 데이터 표시

#### 방법 2: UDP Flood Generator

```powershell
cd C:\My_Project\WS\Demo_Scripts
.\UDP_Flood_Generator.ps1
```

**효과:**

- UDP Flood 공격 시뮬레이션 (200 pps)
- 포트: 53 (DNS), 123 (NTP), 161 (SNMP)

---

### Step 3: Security Dashboard에서 확인

1. **WindowsSentinel 실행**
2. **Security Dashboard 탭 이동**
3. **"📈 위험도 트렌드" 차트 확인**

**기대 결과:**

- 빨간색 라인 차트에 데이터 표시
- X축: 0h, 5h, 10h, 15h, 20h
- Y축: 위협 수 (정수)
- 현재 시간대에 공격 수 증가

---

## 🔍 디버그 모드 실행 (문제 진단)

### Visual Studio에서 실행 (F5)

1. **Visual Studio에서 LogCheck.sln 열기**
2. **F5 누르기 (디버깅 시작)**
3. **Security Dashboard 탭 이동**
4. **출력 창에서 로그 확인:**

```
[디버그 로그 예시]
SecurityDashboard 초기화 완료 - DDoS 시스템: 연결됨
🔄 메트릭 업데이트: 총 공격 0개, 차단 0개
📊 차트 업데이트 시작: 총 위협 0개
✅ 차트 업데이트 완료: 총 0 위협 탐지
```

### PowerShell에서 실행 후 로그 확인

```powershell
# DebugView 도구 사용 (선택)
# https://learn.microsoft.com/sysinternals/downloads/debugview
# 또는 Visual Studio Attach to Process
```

---

## 🛠️ 문제 해결

### 문제 1: "DDoS 시스템 없음"

**원인:** IntegratedDDoSDefenseSystem이 App.xaml에 등록되지 않음

**해결:**

1. `App.xaml` 열기
2. `<Application.Resources>` 섹션 확인
3. IntegratedDDoSDefenseSystem이 있는지 확인

### 문제 2: 차트에 데이터 없음 (0만 표시)

**원인:** 실제 공격 데이터가 없음

**해결:**

1. DDoS 공격 시뮬레이터 실행 (위 Step 2 참조)
2. 2초 대기 (자동 업데이트)
3. 차트 확인

### 문제 3: 차트 업데이트가 느림

**원인:** 업데이트 간격이 너무 김

**해결:** ✅ 이미 2초로 단축됨

- 기존: 30초 간격
- 현재: 2초 간격 (실시간 모니터링)

---

## 📊 차트 동작 원리

### 데이터 흐름

```
1. IntegratedDDoSDefenseSystem
   └─> 패킷 분석 (1초마다)
       └─> 공격 탐지
           └─> _hourlyThreatCounts 업데이트 (시간대별 카운터)

2. SecurityDashboardViewModel
   └─> UpdateMetrics() (2초마다)
       └─> GetStatistics()
           └─> GetHourlyThreatTrend()
               └─> UpdateThreatTrendChart()
                   └─> 차트 UI 업데이트
```

### 시간대별 통계

- **저장 위치:** `IntegratedDDoSDefenseSystem._hourlyThreatCounts`
- **형식:** `ConcurrentDictionary<int, int>` (시간 → 위협 수)
- **범위:** 0시 ~ 23시 (24시간)
- **누적 방식:** 공격 탐지 시 현재 시간대 카운터 증가

---

## ✅ 테스트 성공 기준

### 최소 요구사항

- [x] SecurityDashboard 로드 시 "DDoS 시스템: 연결됨" 로그
- [x] 2초마다 "메트릭 업데이트" 로그
- [x] 공격 시뮬레이터 실행 시 차트에 데이터 표시
- [x] 현재 시간대(예: 14h)에 빨간 라인 증가

### 완전한 성공

- [x] 차트가 부드럽게 업데이트됨
- [x] 여러 시간대에 데이터 분산
- [x] Y축 스케일이 자동 조정됨
- [x] 한글 폰트가 선명하게 표시됨

---

## 🎯 발표 시연용 추천 시나리오

### 시나리오: "실시간 DDoS 공격 탐지 및 차트 시각화"

1. **WindowsSentinel 실행**
2. **Security Dashboard 탭 열기** (초기 상태: 0개)
3. **PowerShell에서 공격 시뮬레이터 실행**
   ```powershell
   .\Simple_Attack_Generator.ps1
   ```
4. **2-5초 대기**
5. **차트에 빨간 라인 증가 확인** 🎉
6. **"활성 위협" 카운터 증가 확인**
7. **"차단된 연결" 카운터 증가 확인**

**예상 시간:** 30초 이내 완료

---

## 📝 마지막 체크

- ✅ 빌드 성공 (0 errors, 12 warnings)
- ✅ 업데이트 간격: 30초 → 2초
- ✅ 디버그 로그 추가 완료
- ✅ 한글 폰트 적용 (맑은 고딕)
- ✅ 차트 스타일 개선 (부드러운 곡선, 5시간 간격 라벨)
- ✅ 시간대별 통계 시스템 구현 완료

**날짜:** 2025-10-19  
**D-3일 (발표일: 2025-10-22)**
